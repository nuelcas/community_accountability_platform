{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import\"./ReportIssue.css\";import Contact from\"./Contact\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ReportIssue=()=>{const[title,setTitle]=useState(\"\");const[description,setDescription]=useState(\"\");const[location,setLocation]=useState(\"\");const[fileUploads,setFileUploads]=useState([null,null,null,null,null]);const[visibleUpload,setVisibleUpload]=useState(1);// Control how many file inputs are visible\n// Function to handle file uploads\nconst handleFileChange=(e,index)=>{const file=e.target.files[0];if(file&&file.size>250*1024*1024){alert(\"File size cannot exceed 250MB\");return;}const newFileUploads=[...fileUploads];newFileUploads[index]=file;setFileUploads(newFileUploads);if(index+1<5&&file){setVisibleUpload(index+2);}};// Function to handle form submission\nconst handleSubmit=async e=>{e.preventDefault();const formData=new FormData();formData.append(\"title\",title);formData.append(\"description\",description);formData.append(\"location\",location);fileUploads.forEach((file,index)=>{if(file){formData.append(`file${index+1}`,file);}});try{const token=localStorage.getItem(\"token\");// Fetch the authentication token from localStorage\nif(!token){alert(\"You need to log in to report an issue.\");return;}const response=await axios.post(\"http://localhost:5000/api/reports\",formData,{headers:{\"Content-Type\":\"multipart/form-data\",Authorization:`Bearer ${token}`}});console.log(response.data);alert(\"Issue reported successfully!\");}catch(err){console.error(\"Error reporting issue\",err);alert(\"Failed to report issue. Please try again.\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"report-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-wrapper\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"form-title\",children:\"Report an Issue\"}),/*#__PURE__*/_jsx(\"p\",{className:\"form-mission\",children:\"Help us maintain accountability and transparency by reporting issues affecting your community. Your report helps us create better solutions.\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"issue-form\",encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Issue Title\",value:title,onChange:e=>setTitle(e.target.value),required:true,className:\"input-field\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Issue Description\",value:description,onChange:e=>setDescription(e.target.value),required:true,className:\"textarea-field\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Location (e.g., Address, Nigeria)\",value:location,onChange:e=>setLocation(e.target.value),required:true,className:\"input-field\"}),/*#__PURE__*/_jsx(\"div\",{className:\"file-upload\",children:Array.from({length:5},(_,index)=>/*#__PURE__*/_jsxs(\"div\",{className:`file-input ${index<visibleUpload?\"\":\"hidden\"}`,children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:`file${index+1}`,children:[\"Upload File \",index+1,\" (Optional):\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:`file${index+1}`,accept:\"image/*,video/*\",onChange:e=>handleFileChange(e,index),className:\"file-input-field\"})]},index))}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",children:\"Submit Report\"})]})]}),/*#__PURE__*/_jsx(Contact,{})]});};export default ReportIssue;","map":{"version":3,"names":["React","useState","axios","Contact","jsx","_jsx","jsxs","_jsxs","ReportIssue","title","setTitle","description","setDescription","location","setLocation","fileUploads","setFileUploads","visibleUpload","setVisibleUpload","handleFileChange","e","index","file","target","files","size","alert","newFileUploads","handleSubmit","preventDefault","formData","FormData","append","forEach","token","localStorage","getItem","response","post","headers","Authorization","console","log","data","err","error","className","children","onSubmit","encType","type","placeholder","value","onChange","required","Array","from","length","_","htmlFor","id","accept"],"sources":["C:/cap/src/components/ReportIssue.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./ReportIssue.css\";\r\nimport Contact from \"./Contact\";\r\n\r\nconst ReportIssue = () => {\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [location, setLocation] = useState(\"\");\r\n  const [fileUploads, setFileUploads] = useState([\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n  ]);\r\n  const [visibleUpload, setVisibleUpload] = useState(1); // Control how many file inputs are visible\r\n\r\n  // Function to handle file uploads\r\n  const handleFileChange = (e, index) => {\r\n    const file = e.target.files[0];\r\n    if (file && file.size > 250 * 1024 * 1024) {\r\n      alert(\"File size cannot exceed 250MB\");\r\n      return;\r\n    }\r\n\r\n    const newFileUploads = [...fileUploads];\r\n    newFileUploads[index] = file;\r\n    setFileUploads(newFileUploads);\r\n\r\n    if (index + 1 < 5 && file) {\r\n      setVisibleUpload(index + 2);\r\n    }\r\n  };\r\n\r\n  // Function to handle form submission\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"title\", title);\r\n    formData.append(\"description\", description);\r\n    formData.append(\"location\", location);\r\n    fileUploads.forEach((file, index) => {\r\n      if (file) {\r\n        formData.append(`file${index + 1}`, file);\r\n      }\r\n    });\r\n\r\n    try {\r\n      const token = localStorage.getItem(\"token\"); // Fetch the authentication token from localStorage\r\n      if (!token) {\r\n        alert(\"You need to log in to report an issue.\");\r\n        return;\r\n      }\r\n\r\n      const response = await axios.post(\r\n        \"http://localhost:5000/api/reports\",\r\n        formData,\r\n        {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\",\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      console.log(response.data);\r\n      alert(\"Issue reported successfully!\");\r\n    } catch (err) {\r\n      console.error(\"Error reporting issue\", err);\r\n      alert(\"Failed to report issue. Please try again.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"report-container\">\r\n      <div className=\"form-wrapper\">\r\n        <h2 className=\"form-title\">Report an Issue</h2>\r\n        <p className=\"form-mission\">\r\n          Help us maintain accountability and transparency by reporting issues\r\n          affecting your community. Your report helps us create better\r\n          solutions.\r\n        </p>\r\n        <form\r\n          onSubmit={handleSubmit}\r\n          className=\"issue-form\"\r\n          encType=\"multipart/form-data\"\r\n        >\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Issue Title\"\r\n            value={title}\r\n            onChange={(e) => setTitle(e.target.value)}\r\n            required\r\n            className=\"input-field\"\r\n          />\r\n          <textarea\r\n            placeholder=\"Issue Description\"\r\n            value={description}\r\n            onChange={(e) => setDescription(e.target.value)}\r\n            required\r\n            className=\"textarea-field\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Location (e.g., Address, Nigeria)\"\r\n            value={location}\r\n            onChange={(e) => setLocation(e.target.value)}\r\n            required\r\n            className=\"input-field\"\r\n          />\r\n\r\n          {/* File Upload Inputs */}\r\n          <div className=\"file-upload\">\r\n            {Array.from({ length: 5 }, (_, index) => (\r\n              <div\r\n                key={index}\r\n                className={`file-input ${\r\n                  index < visibleUpload ? \"\" : \"hidden\"\r\n                }`}\r\n              >\r\n                <label htmlFor={`file${index + 1}`}>\r\n                  Upload File {index + 1} (Optional):\r\n                </label>\r\n                <input\r\n                  type=\"file\"\r\n                  id={`file${index + 1}`}\r\n                  accept=\"image/*,video/*\"\r\n                  onChange={(e) => handleFileChange(e, index)}\r\n                  className=\"file-input-field\"\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <button type=\"submit\" className=\"submit-button\">\r\n            Submit Report\r\n          </button>\r\n        </form>\r\n      </div>\r\n      <Contact />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportIssue;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}