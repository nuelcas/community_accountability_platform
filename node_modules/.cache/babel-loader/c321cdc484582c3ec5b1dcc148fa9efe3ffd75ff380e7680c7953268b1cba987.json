{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import\"./Polls.css\";import Contact from\"./Contact\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Poll=()=>{const[polls,setPolls]=useState([]);const[selectedOption,setSelectedOption]=useState(\"\");// const [selectedPolls, setSelectedPolls] = useState(null);\nconst[voted,setVoted]=useState(false);useEffect(()=>{// Fetch all polls from the backend\nconst fetchPolls=async()=>{try{const response=await axios.get(\"https://strawpoll.com/e7ZJa8KmPg3\");setPolls(response.data);}catch(err){console.error(\"Error fetching polls\",err);}};fetchPolls();},[]);const handleVote=async pollId=>{if(!selectedOption||!pollId)return;try{await axios.post(`http://localhost:5000/api/polls/${pollId}/vote`,{option:selectedOption});setVoted(true);}catch(err){console.error(\"Error submitting vote\",err);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"poll-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Community Polls\"}),/*#__PURE__*/_jsx(\"p\",{className:\"polls-mission\",children:\"Your voice matters! At CAP, we encourage community participation through transparent polling. Let\\u2019s work together to hold leaders accountable and make decisions that reflect the community\\u2019s needs.\"}),polls.map(poll=>/*#__PURE__*/_jsxs(\"div\",{className:\"poll-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:poll.question}),/*#__PURE__*/_jsx(\"div\",{className:\"options-container\",children:poll.options.map((option,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:`option${index}-${poll.id}`,name:`poll-${poll.id}`,value:option,onChange:e=>setSelectedOption(e.target.value)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:`option${index}-${poll.id}`,children:option})]},index))}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleVote(poll.id),disabled:voted,className:`vote-button ${voted?\"disabled\":\"\"}`,children:voted?\"Vote Submitted\":\"Submit Vote\"}),voted&&/*#__PURE__*/_jsx(\"p\",{className:\"thank-you\",children:\"Thank you for voting!\"})]},poll.id))]}),/*#__PURE__*/_jsx(Contact,{})]});};export default Poll;","map":{"version":3,"names":["React","useState","useEffect","axios","Contact","jsx","_jsx","jsxs","_jsxs","Poll","polls","setPolls","selectedOption","setSelectedOption","voted","setVoted","fetchPolls","response","get","data","err","console","error","handleVote","pollId","post","option","className","children","map","poll","question","options","index","type","id","name","value","onChange","e","target","htmlFor","onClick","disabled"],"sources":["C:/cap/src/components/Polls.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./Polls.css\";\r\nimport Contact from \"./Contact\";\r\n\r\nconst Poll = () => {\r\n  const [polls, setPolls] = useState([]);\r\n  const [selectedOption, setSelectedOption] = useState(\"\");\r\n  // const [selectedPolls, setSelectedPolls] = useState(null);\r\n  const [voted, setVoted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Fetch all polls from the backend\r\n    const fetchPolls = async () => {\r\n      try {\r\n        const response = await axios.get(\"https://strawpoll.com/e7ZJa8KmPg3\");\r\n        setPolls(response.data);\r\n      } catch (err) {\r\n        console.error(\"Error fetching polls\", err);\r\n      }\r\n    };\r\n\r\n    fetchPolls();\r\n  }, []);\r\n\r\n  const handleVote = async (pollId) => {\r\n    if (!selectedOption || !pollId) return;\r\n    try {\r\n      await axios.post(`http://localhost:5000/api/polls/${pollId}/vote`, {\r\n        option: selectedOption,\r\n      });\r\n      setVoted(true);\r\n    } catch (err) {\r\n      console.error(\"Error submitting vote\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"poll-container\">\r\n        <h2>Community Polls</h2>\r\n        <p className=\"polls-mission\">\r\n          Your voice matters! At CAP, we encourage community participation\r\n          through transparent polling. Let’s work together to hold leaders\r\n          accountable and make decisions that reflect the community’s needs.\r\n        </p>\r\n        {polls.map((poll) => (\r\n          <div key={poll.id} className=\"poll-card\">\r\n            <h3>{poll.question}</h3>\r\n            <div className=\"options-container\">\r\n              {poll.options.map((option, index) => (\r\n                <div key={index} className=\"option\">\r\n                  <input\r\n                    type=\"radio\"\r\n                    id={`option${index}-${poll.id}`}\r\n                    name={`poll-${poll.id}`}\r\n                    value={option}\r\n                    onChange={(e) => setSelectedOption(e.target.value)}\r\n                  />\r\n                  <label htmlFor={`option${index}-${poll.id}`}>{option}</label>\r\n                </div>\r\n              ))}\r\n            </div>\r\n            <button\r\n              onClick={() => handleVote(poll.id)}\r\n              disabled={voted}\r\n              className={`vote-button ${voted ? \"disabled\" : \"\"}`}\r\n            >\r\n              {voted ? \"Vote Submitted\" : \"Submit Vote\"}\r\n            </button>\r\n            {voted && <p className=\"thank-you\">Thank you for voting!</p>}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <Contact />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Poll;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,aAAa,CACpB,MAAO,CAAAC,OAAO,KAAM,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhC,KAAM,CAAAC,IAAI,CAAGA,CAAA,GAAM,CACjB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACW,cAAc,CAAEC,iBAAiB,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACxD;AACA,KAAM,CAACa,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CAEzCC,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAc,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAd,KAAK,CAACe,GAAG,CAAC,mCAAmC,CAAC,CACrEP,QAAQ,CAACM,QAAQ,CAACE,IAAI,CAAC,CACzB,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,sBAAsB,CAAEF,GAAG,CAAC,CAC5C,CACF,CAAC,CAEDJ,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAO,UAAU,CAAG,KAAO,CAAAC,MAAM,EAAK,CACnC,GAAI,CAACZ,cAAc,EAAI,CAACY,MAAM,CAAE,OAChC,GAAI,CACF,KAAM,CAAArB,KAAK,CAACsB,IAAI,CAAC,mCAAmCD,MAAM,OAAO,CAAE,CACjEE,MAAM,CAAEd,cACV,CAAC,CAAC,CACFG,QAAQ,CAAC,IAAI,CAAC,CAChB,CAAE,MAAOK,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,uBAAuB,CAAEF,GAAG,CAAC,CAC7C,CACF,CAAC,CAED,mBACEZ,KAAA,QAAKmB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBpB,KAAA,QAAKmB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BtB,IAAA,OAAAsB,QAAA,CAAI,iBAAe,CAAI,CAAC,cACxBtB,IAAA,MAAGqB,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,gNAI7B,CAAG,CAAC,CACHlB,KAAK,CAACmB,GAAG,CAAEC,IAAI,eACdtB,KAAA,QAAmBmB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACtCtB,IAAA,OAAAsB,QAAA,CAAKE,IAAI,CAACC,QAAQ,CAAK,CAAC,cACxBzB,IAAA,QAAKqB,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAC/BE,IAAI,CAACE,OAAO,CAACH,GAAG,CAAC,CAACH,MAAM,CAAEO,KAAK,gBAC9BzB,KAAA,QAAiBmB,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACjCtB,IAAA,UACE4B,IAAI,CAAC,OAAO,CACZC,EAAE,CAAE,SAASF,KAAK,IAAIH,IAAI,CAACK,EAAE,EAAG,CAChCC,IAAI,CAAE,QAAQN,IAAI,CAACK,EAAE,EAAG,CACxBE,KAAK,CAAEX,MAAO,CACdY,QAAQ,CAAGC,CAAC,EAAK1B,iBAAiB,CAAC0B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CACpD,CAAC,cACF/B,IAAA,UAAOmC,OAAO,CAAE,SAASR,KAAK,IAAIH,IAAI,CAACK,EAAE,EAAG,CAAAP,QAAA,CAAEF,MAAM,CAAQ,CAAC,GARrDO,KASL,CACN,CAAC,CACC,CAAC,cACN3B,IAAA,WACEoC,OAAO,CAAEA,CAAA,GAAMnB,UAAU,CAACO,IAAI,CAACK,EAAE,CAAE,CACnCQ,QAAQ,CAAE7B,KAAM,CAChBa,SAAS,CAAE,eAAeb,KAAK,CAAG,UAAU,CAAG,EAAE,EAAG,CAAAc,QAAA,CAEnDd,KAAK,CAAG,gBAAgB,CAAG,aAAa,CACnC,CAAC,CACRA,KAAK,eAAIR,IAAA,MAAGqB,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,uBAAqB,CAAG,CAAC,GAvBpDE,IAAI,CAACK,EAwBV,CACN,CAAC,EACC,CAAC,cACN7B,IAAA,CAACF,OAAO,GAAE,CAAC,EACR,CAAC,CAEV,CAAC,CAED,cAAe,CAAAK,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}