{"ast":null,"code":"var _jsxFileName = \"C:\\\\cap\\\\src\\\\components\\\\ReportIssue.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport \"./ReportIssue.css\";\nimport Contact from \"./Contact\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ReportIssue = () => {\n  _s();\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [location, setLocation] = useState(\"\");\n  const [fileUploads, setFileUploads] = useState([null, null, null, null, null]);\n  const [visibleUpload, setVisibleUpload] = useState(1); // Control how many file inputs are visible\n\n  // Function to handle file uploads\n  const handleFileChange = (e, index) => {\n    const file = e.target.files[0];\n    if (file && file.size > 250 * 1024 * 1024) {\n      alert(\"File size cannot exceed 250MB\");\n      return;\n    }\n    const newFileUploads = [...fileUploads];\n    newFileUploads[index] = file;\n    setFileUploads(newFileUploads);\n    if (index + 1 < 5 && file) {\n      setVisibleUpload(index + 2);\n    }\n  };\n\n  // Function to handle form submission\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"title\", title);\n    formData.append(\"description\", description);\n    formData.append(\"location\", location);\n    fileUploads.forEach((file, index) => {\n      if (file) {\n        formData.append(`file${index + 1}`, file);\n      }\n    });\n    try {\n      const token = localStorage.getItem(\"token\"); // Fetch the authentication token from localStorage\n      if (!token) {\n        alert(\"You need to log in to report an issue.\");\n        return;\n      }\n      const response = await axios.post(\"http://localhost:5000/api/reports\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: `Bearer ${token}` // Include the token in the Authorization header\n        }\n      });\n      console.log(response.data);\n      alert(\"Issue reported successfully!\");\n    } catch (err) {\n      console.error(\"Error reporting issue\", err);\n      alert(\"Failed to report issue. Please try again.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"report-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"form-title\",\n        children: \"Report an Issue\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"form-mission\",\n        children: \"Help us maintain accountability and transparency by reporting issues affecting your community. Your report helps us create better solutions.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"issue-form\",\n        encType: \"multipart/form-data\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Issue Title\",\n          value: title,\n          onChange: e => setTitle(e.target.value),\n          required: true,\n          className: \"input-field\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          placeholder: \"Issue Description\",\n          value: description,\n          onChange: e => setDescription(e.target.value),\n          required: true,\n          className: \"textarea-field\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Location (e.g., Address, Nigeria)\",\n          value: location,\n          onChange: e => setLocation(e.target.value),\n          required: true,\n          className: \"input-field\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"file-upload\",\n          children: Array.from({\n            length: 5\n          }, (_, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `file-input ${index < visibleUpload ? \"\" : \"hidden\"}`,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: `file${index + 1}`,\n              children: [\"Upload File \", index + 1, \" (Optional):\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              id: `file${index + 1}`,\n              accept: \"image/*,video/*\",\n              onChange: e => handleFileChange(e, index),\n              className: \"file-input-field\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"submit-button\",\n          children: \"Submit Report\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Contact, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n};\n_s(ReportIssue, \"V+wBmPYygjAWiwOdoAqKu2rqGAE=\");\n_c = ReportIssue;\nexport default ReportIssue;\nvar _c;\n$RefreshReg$(_c, \"ReportIssue\");","map":{"version":3,"names":["React","useState","axios","Contact","jsxDEV","_jsxDEV","ReportIssue","_s","title","setTitle","description","setDescription","location","setLocation","fileUploads","setFileUploads","visibleUpload","setVisibleUpload","handleFileChange","e","index","file","target","files","size","alert","newFileUploads","handleSubmit","preventDefault","formData","FormData","append","forEach","token","localStorage","getItem","response","post","headers","Authorization","console","log","data","err","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","encType","type","placeholder","value","onChange","required","Array","from","length","_","htmlFor","id","accept","_c","$RefreshReg$"],"sources":["C:/cap/src/components/ReportIssue.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./ReportIssue.css\";\r\nimport Contact from \"./Contact\";\r\n\r\nconst ReportIssue = () => {\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [location, setLocation] = useState(\"\");\r\n  const [fileUploads, setFileUploads] = useState([\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n  ]);\r\n  const [visibleUpload, setVisibleUpload] = useState(1); // Control how many file inputs are visible\r\n\r\n  // Function to handle file uploads\r\n  const handleFileChange = (e, index) => {\r\n    const file = e.target.files[0];\r\n    if (file && file.size > 250 * 1024 * 1024) {\r\n      alert(\"File size cannot exceed 250MB\");\r\n      return;\r\n    }\r\n\r\n    const newFileUploads = [...fileUploads];\r\n    newFileUploads[index] = file;\r\n    setFileUploads(newFileUploads);\r\n\r\n    if (index + 1 < 5 && file) {\r\n      setVisibleUpload(index + 2);\r\n    }\r\n  };\r\n\r\n  // Function to handle form submission\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"title\", title);\r\n    formData.append(\"description\", description);\r\n    formData.append(\"location\", location);\r\n    fileUploads.forEach((file, index) => {\r\n      if (file) {\r\n        formData.append(`file${index + 1}`, file);\r\n      }\r\n    });\r\n\r\n    try {\r\n      const token = localStorage.getItem(\"token\"); // Fetch the authentication token from localStorage\r\n      if (!token) {\r\n        alert(\"You need to log in to report an issue.\");\r\n        return;\r\n      }\r\n\r\n      const response = await axios.post(\r\n        \"http://localhost:5000/api/reports\",\r\n        formData,\r\n        {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\",\r\n            Authorization: `Bearer ${token}`, // Include the token in the Authorization header\r\n          },\r\n        }\r\n      );\r\n\r\n      console.log(response.data);\r\n      alert(\"Issue reported successfully!\");\r\n    } catch (err) {\r\n      console.error(\"Error reporting issue\", err);\r\n      alert(\"Failed to report issue. Please try again.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"report-container\">\r\n      <div className=\"form-wrapper\">\r\n        <h2 className=\"form-title\">Report an Issue</h2>\r\n        <p className=\"form-mission\">\r\n          Help us maintain accountability and transparency by reporting issues\r\n          affecting your community. Your report helps us create better\r\n          solutions.\r\n        </p>\r\n        <form\r\n          onSubmit={handleSubmit}\r\n          className=\"issue-form\"\r\n          encType=\"multipart/form-data\"\r\n        >\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Issue Title\"\r\n            value={title}\r\n            onChange={(e) => setTitle(e.target.value)}\r\n            required\r\n            className=\"input-field\"\r\n          />\r\n          <textarea\r\n            placeholder=\"Issue Description\"\r\n            value={description}\r\n            onChange={(e) => setDescription(e.target.value)}\r\n            required\r\n            className=\"textarea-field\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Location (e.g., Address, Nigeria)\"\r\n            value={location}\r\n            onChange={(e) => setLocation(e.target.value)}\r\n            required\r\n            className=\"input-field\"\r\n          />\r\n\r\n          {/* File Upload Inputs */}\r\n          <div className=\"file-upload\">\r\n            {Array.from({ length: 5 }, (_, index) => (\r\n              <div\r\n                key={index}\r\n                className={`file-input ${\r\n                  index < visibleUpload ? \"\" : \"hidden\"\r\n                }`}\r\n              >\r\n                <label htmlFor={`file${index + 1}`}>\r\n                  Upload File {index + 1} (Optional):\r\n                </label>\r\n                <input\r\n                  type=\"file\"\r\n                  id={`file${index + 1}`}\r\n                  accept=\"image/*,video/*\"\r\n                  onChange={(e) => handleFileChange(e, index)}\r\n                  className=\"file-input-field\"\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <button type=\"submit\" className=\"submit-button\">\r\n            Submit Report\r\n          </button>\r\n        </form>\r\n      </div>\r\n      <Contact />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportIssue;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}